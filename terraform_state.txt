# yandex_compute_instance.bastion:
resource "yandex_compute_instance" "bastion" {
    created_at                = "2025-10-23T10:39:43Z"
    folder_id                 = "b1ggfbvqp4r5b1trk8ec"
    fqdn                      = "fhme4ra2sfm0f17g3duq.auto.internal"
    hardware_generation       = [
        {
            generation2_features = []
            legacy_features      = [
                {
                    pci_topology = "PCI_TOPOLOGY_V1"
                },
            ]
        },
    ]
    id                        = "fhme4ra2sfm0f17g3duq"
    labels                    = {}
    metadata                  = {
        "ssh-keys" = <<-EOT
            ubuntu:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDYYRooydyclgdDP8JZQG7XASCwHXvzC6GOOL9Rla6fgtzWG8FMRWM/uL8AvW/PlwaFl/xmidA755zx2TwFNyjMktCKfCF5b8OIfJ5Zc/bKwaNyeiTYVZQsJuoQ6SoWeVyRhk0IrghfytyYfBIC3Kfn+/rKrK+CxES3hgxDbWDgNjMXoZkmfj4YWrmN7pOkesKiblVlTKzONYkJQs7TMZgGeuBh/pXs8B0nLzBfDKU7UZy7mDF73OiOvPTyPO1HYlCFrbqjVR52hvBoPpHjI6e6jDi0qS7RK7sg4rhugC8xrMk445V6P5S17cEmYS9dP51je97NN6Y3eYZz80Mc3Xvv nvzar@compute-vm-nv
        EOT
    }
    name                      = "bastion"
    network_acceleration_type = "standard"
    platform_id               = "standard-v1"
    status                    = "running"
    zone                      = "ru-central1-a"

    boot_disk {
        auto_delete = true
        device_name = "fhm112sa4da5pgv1nvjp"
        disk_id     = "fhm112sa4da5pgv1nvjp"
        mode        = "READ_WRITE"

        initialize_params {
            block_size = 4096
            image_id   = "fd8kdq6d0p8sij7h5qe3"
            size       = 10
            type       = "network-hdd"
        }
    }

    metadata_options {
        aws_v1_http_endpoint = 1
        aws_v1_http_token    = 2
        gce_http_endpoint    = 1
        gce_http_token       = 1
    }

    network_interface {
        index              = 0
        ip_address         = "192.168.10.9"
        ipv4               = true
        ipv6               = false
        mac_address        = "d0:0d:e2:6d:42:e3"
        nat                = true
        nat_ip_address     = "84.201.130.92"
        nat_ip_version     = "IPV4"
        security_group_ids = []
        subnet_id          = "e9b0r3ip5ct4s2281pk0"
    }

    placement_policy {
        host_affinity_rules       = []
        placement_group_partition = 0
    }

    resources {
        core_fraction = 100
        cores         = 2
        gpus          = 0
        memory        = 2
    }

    scheduling_policy {
        preemptible = false
    }
}

# yandex_compute_instance.web-a:
resource "yandex_compute_instance" "web-a" {
    created_at                = "2025-10-23T10:39:43Z"
    folder_id                 = "b1ggfbvqp4r5b1trk8ec"
    fqdn                      = "fhmp2lsj6r1949l0hkr4.auto.internal"
    hardware_generation       = [
        {
            generation2_features = []
            legacy_features      = [
                {
                    pci_topology = "PCI_TOPOLOGY_V1"
                },
            ]
        },
    ]
    id                        = "fhmp2lsj6r1949l0hkr4"
    labels                    = {}
    metadata                  = {
        "ssh-keys" = <<-EOT
            ubuntu:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDYYRooydyclgdDP8JZQG7XASCwHXvzC6GOOL9Rla6fgtzWG8FMRWM/uL8AvW/PlwaFl/xmidA755zx2TwFNyjMktCKfCF5b8OIfJ5Zc/bKwaNyeiTYVZQsJuoQ6SoWeVyRhk0IrghfytyYfBIC3Kfn+/rKrK+CxES3hgxDbWDgNjMXoZkmfj4YWrmN7pOkesKiblVlTKzONYkJQs7TMZgGeuBh/pXs8B0nLzBfDKU7UZy7mDF73OiOvPTyPO1HYlCFrbqjVR52hvBoPpHjI6e6jDi0qS7RK7sg4rhugC8xrMk445V6P5S17cEmYS9dP51je97NN6Y3eYZz80Mc3Xvv nvzar@compute-vm-nv
        EOT
    }
    name                      = "web-a"
    network_acceleration_type = "standard"
    platform_id               = "standard-v1"
    status                    = "running"
    zone                      = "ru-central1-a"

    boot_disk {
        auto_delete = true
        device_name = "fhmo086gbdmi9pkbb5nm"
        disk_id     = "fhmo086gbdmi9pkbb5nm"
        mode        = "READ_WRITE"

        initialize_params {
            block_size = 4096
            image_id   = "fd8kdq6d0p8sij7h5qe3"
            size       = 10
            type       = "network-hdd"
        }
    }

    metadata_options {
        aws_v1_http_endpoint = 1
        aws_v1_http_token    = 2
        gce_http_endpoint    = 1
        gce_http_token       = 1
    }

    network_interface {
        index              = 0
        ip_address         = "192.168.10.32"
        ipv4               = true
        ipv6               = false
        mac_address        = "d0:0d:19:15:79:33"
        nat                = false
        security_group_ids = []
        subnet_id          = "e9b0r3ip5ct4s2281pk0"
    }

    placement_policy {
        host_affinity_rules       = []
        placement_group_partition = 0
    }

    resources {
        core_fraction = 100
        cores         = 2
        gpus          = 0
        memory        = 2
    }

    scheduling_policy {
        preemptible = false
    }
}

# yandex_compute_instance.web-b:
resource "yandex_compute_instance" "web-b" {
    created_at                = "2025-10-23T10:39:44Z"
    folder_id                 = "b1ggfbvqp4r5b1trk8ec"
    fqdn                      = "fhm8pb2ch2ih2sd1ul4n.auto.internal"
    hardware_generation       = [
        {
            generation2_features = []
            legacy_features      = [
                {
                    pci_topology = "PCI_TOPOLOGY_V1"
                },
            ]
        },
    ]
    id                        = "fhm8pb2ch2ih2sd1ul4n"
    labels                    = {}
    metadata                  = {
        "ssh-keys" = <<-EOT
            ubuntu:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDYYRooydyclgdDP8JZQG7XASCwHXvzC6GOOL9Rla6fgtzWG8FMRWM/uL8AvW/PlwaFl/xmidA755zx2TwFNyjMktCKfCF5b8OIfJ5Zc/bKwaNyeiTYVZQsJuoQ6SoWeVyRhk0IrghfytyYfBIC3Kfn+/rKrK+CxES3hgxDbWDgNjMXoZkmfj4YWrmN7pOkesKiblVlTKzONYkJQs7TMZgGeuBh/pXs8B0nLzBfDKU7UZy7mDF73OiOvPTyPO1HYlCFrbqjVR52hvBoPpHjI6e6jDi0qS7RK7sg4rhugC8xrMk445V6P5S17cEmYS9dP51je97NN6Y3eYZz80Mc3Xvv nvzar@compute-vm-nv
        EOT
    }
    name                      = "web-b"
    network_acceleration_type = "standard"
    platform_id               = "standard-v1"
    status                    = "running"
    zone                      = "ru-central1-a"

    boot_disk {
        auto_delete = true
        device_name = "fhmekedjr3fm6lkr6erb"
        disk_id     = "fhmekedjr3fm6lkr6erb"
        mode        = "READ_WRITE"

        initialize_params {
            block_size = 4096
            image_id   = "fd8kdq6d0p8sij7h5qe3"
            size       = 10
            type       = "network-hdd"
        }
    }

    metadata_options {
        aws_v1_http_endpoint = 1
        aws_v1_http_token    = 2
        gce_http_endpoint    = 1
        gce_http_token       = 1
    }

    network_interface {
        index              = 0
        ip_address         = "192.168.10.25"
        ipv4               = true
        ipv6               = false
        mac_address        = "d0:0d:8c:ac:4c:88"
        nat                = false
        security_group_ids = []
        subnet_id          = "e9b0r3ip5ct4s2281pk0"
    }

    placement_policy {
        host_affinity_rules       = []
        placement_group_partition = 0
    }

    resources {
        core_fraction = 100
        cores         = 2
        gpus          = 0
        memory        = 2
    }

    scheduling_policy {
        preemptible = false
    }
}

# yandex_vpc_network.network-1:
resource "yandex_vpc_network" "network-1" {
    created_at                = "2025-10-23T10:39:39Z"
    default_security_group_id = "enpkcshhsqjdrqljgpbc"
    folder_id                 = "b1ggfbvqp4r5b1trk8ec"
    id                        = "enpo1a5vqqtqa4sci02b"
    labels                    = {}
    name                      = "network1"
    subnet_ids                = [
        "e9b0r3ip5ct4s2281pk0",
    ]
}

# yandex_vpc_route_table.rt:
resource "yandex_vpc_route_table" "rt" {
    created_at = "2025-10-23T11:09:35Z"
    folder_id  = "b1ggfbvqp4r5b1trk8ec"
    id         = "enpcu2lua3t1kn3oeo4l"
    labels     = {}
    name       = "route-table"
    network_id = "enpo1a5vqqtqa4sci02b"

    static_route {
        destination_prefix = "0.0.0.0/0"
        gateway_id         = "enpkq1opuvtmifd46krm"
    }
}

# yandex_vpc_subnet.subnet-1:
resource "yandex_vpc_subnet" "subnet-1" {
    created_at     = "2025-10-23T10:39:43Z"
    folder_id      = "b1ggfbvqp4r5b1trk8ec"
    id             = "e9b0r3ip5ct4s2281pk0"
    labels         = {}
    name           = "subnet1"
    network_id     = "enpo1a5vqqtqa4sci02b"
    route_table_id = "enpcu2lua3t1kn3oeo4l"
    v4_cidr_blocks = [
        "192.168.10.0/24",
    ]
    v6_cidr_blocks = []
    zone           = "ru-central1-a"
}


Outputs:

bastion_private_ip = "192.168.10.9"
bastion_public_ip = "84.201.130.92"
web_a_private_ip = "192.168.10.32"
web_b_private_ip = "192.168.10.25"
